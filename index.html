<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utah Water Usage Visualization</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.1/dist/flowbite.min.js"></script>

    <style>
        /* Color Palette */
        :root {
            --primary-blue: #1F6FB2;
            --accent-blue: #4B9CD3;
            --dark-blue: #1F4A78;
            --light-grey: #F5F5F5;
            --dark-grey: #4A4A4A;
            --white: #FFFFFF;
        }

        /* Example Custom Styles */
        body {
            background-color: var(--light-grey);
            color: var(--dark-grey);
        }

        nav {
            background-color: var(--primary-blue);
        }

        .hero-overlay {
            background-color: rgba(31, 111, 178, 0.5);
        }

        .bg-dark-blue {
            background-color: var(--dark-blue);
        }

        .text-primary-blue {
            color: var(--primary-blue);
        }

        .text-accent-blue {
            color: var(--accent-blue);
        }

        footer {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        /* Buttons, links and other interactive elements */
        .btn-primary {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        .btn-primary:hover {
            background-color: var(--dark-blue);
        }

        .link {
            color: var(--accent-blue);
        }

        .link:hover {
            color: var(--dark-blue);
        }

        /* Carousel Buttons */
        button[data-carousel-prev] span,
        button[data-carousel-next] span {
            background-color: rgba(31, 74, 120, 0.75);
            color: var(--white);
        }

        button[data-carousel-prev] span:hover,
        button[data-carousel-next] span:hover {
            background-color: rgba(31, 74, 120, 0.9);
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="p-4">
        <div class="container mx-auto flex justify-between">
            <a href="#" class="text-white text-2xl font-semibold">Utah Water Facts</a>
            <div>
                <a href="#about" class="text-white mx-4 hover:underline">About</a>
                <a href="#plots" class="text-white mx-4 hover:underline">Visualizations</a>
                <a href="#references" class="text-white mx-4 hover:underline">References</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-cover bg-center h-screen"
        style="background-image: url('https://github.com/utahwaterfacts/utah-water-facts/blob/main/assets/pexels-matthew-montrone-230847-1204430.jpg?raw=true');">
        <div class="hero-overlay h-full flex items-center justify-center">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-white">Understand Utah's Water Usage</h1>
                <p class="text-xl text-white mt-4">Explore the data through interactive plots</p>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-12 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">About the Project</h2>
            <p class="text-lg text-center mb-4">This project aims to help Utahns understand water usage in the state and
                how we can work to build effective water policy together. All calculations and references can be found
                on the reference page and links to sources are bracketed in each section. I have all of my calculations
                in a spreadsheet <a class="text-blue-500 underline"
                    href="https://docs.google.com/spreadsheets/d/19k61Kop8Ieqk1NmJEEI18TOXT4Mq0ACOtI9yBE-biys/edit?usp=sharing">here</a>.
                If you see any errors or
                discrepencies please reach out at [name of this site]@gmail.com. The nature of this information
                naturally requires some assumptions. I've done my best to make it clear how I've done my calculations.
                If you feel any calculation is missleading again please reach out.
            </p>
            </p>
        </div>
    </section>

    <!-- Carousel Section -->
    <section id="acrefoot" class="py-12  bg-gray-100">
        <div class="container mx-auto px-6 bg-light-grey">
            <h2 class="text-3xl font-semibold text-center mb-8">What is an Acre Foot?</h2>
            <p class="text-lg text-center mb-4">At the level of states water is often measured in Acre Feet. It
                represents the amount of water needed
                to cover one acre of land (~43.5k ft^2) to a depth of one foot. If you're having trouble thinking
                about
                how much water that really is
                you're not alone. It roughly comes out to 385,000 gallons. Let's play a game. Below you will be
                presented with common activities and items that use water, your job is to guess how many times you could
                use or make the item with an acre foot of water.</p>
            </p>
            <div id="controls-carousel" class="relative w-full" data-carousel="static">
                <div class="relative h-56 overflow-hidden rounded-lg md:h-96 flex items-center justify-center">
                    <!-- Item 1 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center"
                        data-carousel-item="active">
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            If you took a 10-minute shower every
                            day, how many years could you shower with an acre foot of water?
                        </p>
                    </div>
                    <!-- Item 2 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            42 Years! That's 15,516 Showers!
                        </p>
                    </div>
                    <!-- Item 3 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            Assuming you use the toillete 5 times a day how many years could you flush to your heart's
                            content?
                        </p>
                    </div>
                    <!-- Item 4 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            111! That's 203,655 Flushes!
                        </p>
                    </div>
                    <!-- Item 5 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            Assuming you do laundry once a week how many years could you keep your clothes clean?
                        </p>
                    </div>
                    <!-- Item 6-->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            272! That's 14,000 Loads of Laundry!
                        </p>
                    </div>
                    <!-- Item 7 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            How many residential pools could you fill?
                        </p>
                    </div>
                    <!-- Item 8 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            16
                        </p>
                    </div>
                    <!-- Item 9 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            How many tons of alfalfa can you grow?
                        </p>
                    </div>
                    <!-- Item 10 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            1.875
                        </p>
                    </div>
                    <!-- Item 11 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            How many days can you feed a dairy cow with alfalfa?
                        </p>
                    </div>
                    <!-- Item 12 -->
                    <div class="hidden duration-700 ease-in-out flex items-center justify-center" data-carousel-item>
                        <p
                            class="text-lg md:text-2xl font-semibold text-center text-gray-800 dark:text-gray-200 p-4 max-w-lg mx-auto">
                            63
                        </p>
                    </div>
                </div>
                <!-- Slider controls -->
                <button type="button"
                    class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
                    data-carousel-prev>
                    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full text-white">
                        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 6 10">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M5 1 1 5l4 4" />
                        </svg>
                        <span class="sr-only">Previous</span>
                    </span>
                </button>
                <button type="button"
                    class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
                    data-carousel-next>
                    <span class="inline-flex items-center justify-center w-12 h-12 rounded-full text-white">
                        <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 6 10">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 9 4-4-4-4" />
                        </svg>
                        <span class="sr-only">Next</span>
                    </span>
                </button>
            </div>
        </div>
    </section>
    <!-- Acre Foot -->
    <section id="plots" class="py-12 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">How does water get used in the State of Utah</h2>
            <p class="text-lg text-center mb-4">An acre foot is A LOT of water! As a person we can shower or use the
                bathroom for most of our lives
                with an acre foot of water. We went through the above information to get a better sense of the data that
                will be presented below. (You can find the calculations in the reference section.) [2]
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Plot 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Things that are equal to an acre foot of water.</h3>
                    <div id="acre_feet" class="h-96"></div>
                </div>
                <!-- Plot 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Water Used by Type</h3>
                    <div id="use_plot" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Population and Water -->
    <section id="plots" class="py-12 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Population and Water Usage</h2>
            <p class="text-lg text-center mb-4">I often hear that our growing population is putting a strain on our
                water resources.
                It's true that more people means more water consumpation but given that human based water consumpation
                is about 10%
                of total water used it doesn't have that big of an effect on the total water consumed by the state. Take
                a look below. We see that the population grew by 82% the total water usage in that time went up and
                down. Funnily enough the correlation between the water usage and population over that time period is
                -0.15.[1]
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Plot 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Utah Population (1985-2015)</h3>
                    <div id="population" class="h-96"></div>
                </div>
                <!-- Plot 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Water Used per Year</h3>
                    <div id="water_use_by_year" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Crops -->
    <section id="plots" class="py-12 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Agricultural Breakdown</h2>
            <p class="text-lg text-center mb-4">Wow! Agriculture is the main water user in Utah! We can see from the
                above plots that about 85% of water is used for agriculture. To better understand our states water usage
                let's explore how that water is used and what crops we grow! <a
                    href="https://www.nass.usda.gov/Quick_Stats/Ag_Overview/stateOverview.php?state=UTAH">[3]</a>[4][5][6][7][8][9][10]
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Plot 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Crops Grown in Utah</h3>
                    <div id="crops" class="h-96"></div>
                </div>
                <!-- Plot 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Amount of Water to Produce one Ton of Crop</h3>
                    <div id="water_used_by_crop" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Crop GDP -->
    <section id="plots" class="py-12 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Agriculture's Economic Contribution to Utah</h2>
            <p class="text-lg text-center mb-4">We grow a lot of neat stuff! If we use money as a proxy for value and
                look at the total impact these crops have on our states economy we see that they are barely a blip. The
                largest contributor is alfalfa and hay at just .2% of our GDP! But it uses 53% of ALL of our state's
                water.
                We spend the majority of our desert water on a commodity that brings in almost no money for our state
                and our people.<a
                    href="https://www.nass.usda.gov/Quick_Stats/Ag_Overview/stateOverview.php?state=UTAH">[3]</a>
            </p>
            <p class="text-lg text-center mb-4">These economics are interesting. If we look at what normal people pay
                for water as a resident it's about $2.09 per unit. A unit is 748 gallons of water. If we look at the
                economics from above we can see that if 100% of the sale price of alfalfa was the water, not accounting
                for any farmer labor, they would be selling the water for $0.37 per unit. Alfalfa farmers are selling
                water at a HUGE discount to their clients when compared to the actual cost of the water. If we look at
                this difference between the price of the water and the sale price as a subsidy then alfalfa farmers in
                the state of Utah receive a $748,000,000 handout from the government every year! This is a greater
                handout than they produce with their land! This isn't entirely fair. City water is potable and so we
                have to be upcharged for water treatment plants and such. But even if it was half as much it would be
                almost the same amount as the total revenue from alfalfa production.
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Plot 1 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Percent of Utah's GDP by Crop</h3>
                    <div id="crop_gdp" class="h-96"></div>
                </div>
                <!-- Plot 2 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Percent of Utah's Water Used to Grow Each Crop</h3>
                    <div id="percent_utah_water_by_crop" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Financials of Hay Exports -->
    <section id="plots" class="py-12 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Where Our Water Goes</h2>
            <p class="text-lg text-center mb-4">We grow hay to sell it. So where does the hay go? Over the last 20 years
                the countries that purchased our hay have changed. In the most recent few years China has been our
                largest foreign customer purchasing $75 million on average over the last five years. Exporting goods to
                other countries is how we grow our wealth as a nation so this can be a very good thing! However when we
                look at these numbers in terms of our precious desert water they become a bit concerning.<a
                    href="https://usatrade.census.gov/">[16]</a>
            </p>
            <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Amount of Hay (NS121490) Exported to Each Country in $</h3>
                    <div id="export_dollar_choropleth" class="h-96"></div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Amount of Hay (NS121490) Exported to Each Country in $</h3>
                    <div id="export_dollar_bar" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Amount of Water Exported -->
    <section id="plots" class="py-12 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Where Our Water Goes</h2>
            <p class="text-lg text-center mb-4">Let's look at these foreign exports in terms of Utah water. You can
                think about every ton of alfalfa that we ship overseas as the purchasing nation using 1.38 acre feet of
                Utah's water. I'm going to assume that the amount of diverted water in Utah is constant each year over
                these 20 years at 4.8 Million Acre Feet. I think this is a reasonable estimate but finding the exact
                number per year has proved challenging. Given that indoor domestic water use is about 2% of all diverted
                water. In every year foreign nations have used more water than individuals living in our state for their
                immediate needs. It feels kind of crappy that places like China get more water without complaint than my
                family, friends, and I.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-1 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Percent of Utah's Usable Water Diverted for Foreign Nations
                    </h3>
                    <div id="foreign_water_usage_total" class="h-96"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- References -->
    <section id="references" class="py-12 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-semibold text-center mb-8">Referneces</h2>
            <p class="text-lg text-left mb-4">
                [0] Cover Photo by Matthew Montrone:
                <a class="text-blue-500 underline"
                    href="https://www.pexels.com/photo/green-grass-and-body-of-water-under-blue-sky-1204430/">https://www.pexels.com/photo/green-grass-and-body-of-water-under-blue-sky-1204430/</a>
                <br>
                [1] <a class="text-blue-500 underline"
                    href="https://nwis.waterdata.usgs.gov/ut/nwis/wu">https://nwis.waterdata.usgs.gov/ut/nwis/wu</a>
                <br>
                [2] <a class="text-blue-500 underline"
                    href="https://www.utahfoundation.org/reports/background-water-utah/#:~:text=Of%20the%205.2%20maf%20of,and%20industrial%20(M%26I)%20use">https://www.utahfoundation.org/reports/background-water-utah/#:~:text=Of%20the%205.2%20maf%20of,and%20industrial%20(M%26I)%20use</a>
                <br>
                [3] <a class="text-blue-500 underline"
                    href="https://www.nass.usda.gov/Quick_Stats/Ag_Overview/stateOverview.php?state=UTAH">https://www.nass.usda.gov/Quick_Stats/Ag_Overview/stateOverview.php?state=UTAH</a>
                <br>
                [4] <a class="text-blue-500 underline"
                    href="https://www.grainunitconverter.com/#:~:text=I.e.%20there%20are%2060%20lbs,when%20trading%20pulses%20or%20cotton">https://www.grainunitconverter.com/#:~:text=I.e.%20there%20are%2060%20lbs,when%20trading%20pulses%20or%20cotton</a>
                <br>
                [5] <a class="text-blue-500 underline"
                    href="https://watercalculator.org/water-footprint-of-food-guide/">https://watercalculator.org/water-footprint-of-food-guide/</a>
                <br>
                [6] <a class="text-blue-500 underline"
                    href="https://gpm.nasa.gov/education/sites/default/files/lesson_plan_files/water-for-wheaties/AG_3_GrowingWheat.pdf">https://gpm.nasa.gov/education/sites/default/files/lesson_plan_files/water-for-wheaties/AG_3_GrowingWheat.pdf</a>
                <br>
                [7] <a class="text-blue-500 underline"
                    href="https://digitalcommons.usu.edu/cgi/viewcontent.cgi?article=1752&context=extension_curall">https://digitalcommons.usu.edu/cgi/viewcontent.cgi?article=1752&context=extension_curall</a>
                <br>
                [8] <a class="text-blue-500 underline"
                    href="https://www2.gov.bc.ca/assets/gov/farming-natural-resources-and-industry/agriculture-and-seafood/agricultural-land-and-environment/water/drought/665000-3_forage_crop_and_irrig_mgmt-drought_factsheet_no3.pdf">https://www2.gov.bc.ca/assets/gov/farming-natural-resources-and-industry/agriculture-and-seafood/agricultural-land-and-environment/water/drought/665000-3_forage_crop_and_irrig_mgmt-drought_factsheet_no3.pdf</a>
                <br>
                [9] <a class="text-blue-500 underline"
                    href="https://pacinst.org/wp-content/uploads/2015/04/CA-Ag-Water-Use.pdf">https://pacinst.org/wp-content/uploads/2015/04/CA-Ag-Water-Use.pdf</a>
                <br>
                [10] <a class="text-blue-500 underline"
                    href="https://hammondcon.org/cropwaterrequirements.html">https://hammondcon.org/cropwaterrequirements.html</a>
                <br>
                [11] <a class="text-blue-500 underline"
                    href="https://www.uga.org/wp-content/uploads/sites/11/2019/09/Enviromental-and-Economic-Impact-Study.pdf">https://www.uga.org/wp-content/uploads/sites/11/2019/09/Enviromental-and-Economic-Impact-Study.pdf</a>
                <br>
                [12] <a class="text-blue-500 underline"
                    href="https://www.perennia.ca/wp-content/uploads/2018/04/water-for-dairy-cows.pdf">https://www.perennia.ca/wp-content/uploads/2018/04/water-for-dairy-cows.pdf</a>
                <br>
                [13] <a class="text-blue-500 underline"
                    href="https://waterdesk.org/2022/12/one-crop-uses-more-than-half-of-utahs-water-heres-why/#:~:text=Alfalfa%20and%20hay%20account%20for,typically%20use%20in%20a%20year">https://waterdesk.org/2022/12/one-crop-uses-more-than-half-of-utahs-water-heres-why</a>
                <br>
                [14] <a class="text-blue-500 underline"
                    href="https://www.slcdocs.com/utilities/PDF%20Files/Rates/2025-07%20Proposed%20effective%20Rates%20for%20Webpage_water.pdf">https://www.slcdocs.com/utilities/PDF%20Files/Rates/2025-07%20Proposed%20effective%20Rates%20for%20Webpage_water.pdf</a>
                <br>
                [15] <a class="text-blue-500 underline"
                    href="https://brazos.org/About-Us/Education/Water-School/ArticleID/249#:~:text=An%20acre%2Dfoot%20is%20commonly,with%20a%20foot%20of%20water">https://brazos.org/About-Us/Education/Water-School/ArticleID/249</a>
                <br>
                [16] <a class="text-blue-500 underline"
                    href="https://usatrade.census.gov/">https://usatrade.census.gov/</a> <br>
            </p>
        </div>
    </section>


    <!-- Footer -->
    <footer class="bg-blue-600 p-4 text-center text-white">
        <p>&copy; 2024 Utah Water Facts. All rights reserved.</p>
    </footer>

    <script>
        // Plotly Plot 1 Example
        var trace1 = {
            x: ['flushes', 'glasses of oat milk', 'showers', 'laundry cycles', 'glasses of milk', 'hamburgers', 't-shirts', 'pools'],
            y: [203655, 108617, 15516, 14000, 8146, 494, 450, 16],
            type: 'bar'
        };
        var data1 = [trace1];
        Plotly.newPlot('acre_feet', data1);

        // Plotly Plot 2 Example
        // https://www.utahfoundation.org/reports/background-water-utah/#:~:text=Of%20the%205.2%20maf%20of,and%20industrial%20(M%26I)%20use
        var trace2 = {
            x: ['Agriculture', 'Residential Outdoor', 'Public Non Community', "Residential Indoor", "Commercial", "Institutional", "Industrial"],
            y: [4.2, 0.367, 0.22, .143, .097, .085, .026],
            type: 'bar',
            // text: ["1", "2", "3", "4", "5", "6", "7"],
            // hoverinfo: "text"
        };
        var data2 = [trace2];
        Plotly.newPlot('use_plot', data2, {
            yaxis: {
                title: 'Water Used (in millions of acre feet)'  // Label for the y-axis
            }
        });

        // Population and Water
        var population_trace = {
            x: ['1985', '1990', '1995', '2000', '2005', '2010', '2015'],
            y: [1644800.0, 1722850.0, 1951400.0, 2233200.0, 2547389.0, 2763885.0, 2995919.0],
            type: 'scatter'
        };
        Plotly.newPlot('population', [population_trace], {
            yaxis: {
                title: 'Population (in millions)',  // Label for the y-axis
                range: [0, 5500000]
            }
        });

        var water_trace = {
            x: ['1985', '1990', '1995', '2000', '2005', '2010', '2015'],
            y: [4.661e6, 4.806e6, 4.818e6, 5.361e6, 5.401e6, 4.63e6, 4.349e6],
            type: 'scatter'
        };

        Plotly.newPlot('water_use_by_year', [water_trace], {
            yaxis: {
                title: 'Water Used (in millions of acre feet)',
                range: [0, 5500000]
            }
        });

        // Agricultural breakdown
        var crops_trace = {
            x: ['alfalfa',
                'hay other',
                'corn',
                'corn silage',
                'cherries',
                'wheat',
                'safflower'],
            y: [1960000, 527000, 279720, 64400, 32500, 27666, 10890],
            type: 'bar'
        };
        Plotly.newPlot('crops', [crops_trace], {
            yaxis: {
                title: 'Tons of Crop',
            }
        });

        var water_trace = {
            x: ['alfalfa',
                'hay other',
                'corn',
                'corn silage',
                'cherries',
                'wheat',
                'safflower'],
            y: [1.38, 1.38, 0.454, 0.454, 0.589, 0.473, 0.477],
            type: 'bar'
        };

        Plotly.newPlot('water_used_by_crop', [water_trace], {
            yaxis: {
                title: 'Acre Feet',
            }
        });

        // Agricultural GDP Breakdown
        var crops_trace = {
            x: ['alfalfa',
                'hay other',
                'corn',
                'corn silage',
                'cherries',
                'wheat',
                'safflower'],
            y: [0.1596,
                0.0344,
                0.002,
                0.0088,
                0.0029,
                0.012,
                0.0014],
            type: 'bar'
        };
        Plotly.newPlot('crop_gdp', [crops_trace], {
            yaxis: {
                title: 'Percent of Utah\'s GDP',
            }
        });

        var water_trace = {
            x: ['alfalfa',
                'hay other',
                'corn',
                'corn silage',
                'cherries',
                'wheat',
                'safflower'],
            y: [53.07,
                14.27,
                2.49,
                0.57,
                0.38,
                0.26,
                0.1],
            type: 'bar'
        };

        Plotly.newPlot('percent_utah_water_by_crop', [water_trace], {
            yaxis: {
                title: 'Percent of Utah\'s Water',
            }
        });

        // test stacked plot
        var trace1 = {
            x: ['Water Savings'],
            y: [1], // 1% for showers
            name: 'Showers',
            type: 'bar'
        };

        var trace2 = {
            x: ['Water Savings'],
            y: [2], // 2% for toilets
            name: 'Toilets',
            type: 'bar'
        };

        var trace3 = {
            x: ['Water Savings'],
            y: [30], // 30% for Chinese alfalfa
            name: 'Chinese Alfalfa',
            type: 'bar'
        };

        // Add more traces for other categories as needed

        var data = [trace1, trace2, trace3];

        var layout = {
            barmode: 'stack',
            title: 'Potential Water Savings in Utah',
            xaxis: {
                title: 'Water Saving Actions'
            },
            yaxis: {
                title: 'Percentage of Total Water Savings (%)'
            },
            showlegend: true
        };

        // Plotly.newPlot('waterSavings', data, layout);


        // choropleth https://github.com/utahwaterfacts/utah-water-facts/blob/main/data/121490hs_sales_world_wide.json
        var export_countries = ['Australia', 'Bahrain', 'Canada', 'China', 'Hong Kong', 'India', 'Italy', 'Japan', 'Korea, South', 'Kuwait', 'Netherlands', 'Oman', 'Pakistan', 'Philippines', 'Qatar', 'Saudi Arabia', 'Singapore', 'Spain', 'Switzerland', 'Taiwan', 'Thailand', 'Trinidad and Tobago', 'United Arab Emirates', 'United Kingdom', 'Vietnam'];
        fetch('https://raw.githubusercontent.com/utahwaterfacts/utah-water-facts/main/data/121490hs_sales_world_wide.json') // Replace with the path to your JSON file
            .then(response => response.json())
            .then(frames => {

                // Keep the absolute values for hover text and labels
                var absoluteZ = frames[0].data[0].z; // Absolute values for display purposes
                var logZ = frames[0].data[0].z.map(value => value > 0 ? Math.log10(value) : 0); // Logarithmic values for coloring

                var data = [
                    {
                        type: 'choropleth',
                        locationmode: 'country names',
                        locations: export_countries,
                        z: logZ, // Logarithmic values for color scale
                        customdata: absoluteZ,
                        text: absoluteZ.map((val, idx) => `\$${val.toLocaleString()}`), // Display absolute values in hover text
                        hoverinfo: 'location+text', // Display country, z, and text in hover
                        autocolorscale: false,
                        zmin: 0, // Min value for log scale
                        zmax: Math.log10(100000000), // Max value for log scale (100M)
                        colorscale: 'Viridis',
                        colorbar: {
                            title: 'Export Value', // Title of the color bar
                            tickvals: [0, 2, 4, 6, 8], // Custom tick values (logarithmic scale)
                            ticktext: ['1', '100', '10k', '1M', '100M'], // Corresponding labels for tick values
                            len: 1.0, // Length of the color bar as a fraction of plot height
                            thickness: 20, // Thickness of the color bar
                            tickformat: ',.0f' // Optional formatting of the tick labels
                        }
                    }
                ];

                var layout = {
                    geo: {
                        projection: {
                            type: 'natural earth'
                        }
                    },
                    sliders: [{
                        active: 0,
                        steps: frames.map(frame => ({
                            method: 'animate',
                            label: frame.name,
                            args: [
                                [frame.name],
                                { mode: 'immediate', transition: { duration: 300 }, frame: { duration: 300, redraw: true } }
                            ]
                        })),
                        x: 0.1,
                        len: 0.9
                    }]
                };

                Plotly.newPlot('export_dollar_choropleth', data, layout).then(function () {
                    // Apply log transformation to the z values of the frames, but keep absolute values for hover text
                    frames.forEach(frame => {
                        frame.data[0].z = frame.data[0].z.map(value => value > 0 ? Math.log10(value) : 0); // Log scale for color
                        frame.data[0].text = frame.data[0].z.map((val, idx) => val > 0 ? `\$${(10 ** val).toLocaleString()}` : `\$0`); // Absolute values for hover text
                    });

                    Plotly.addFrames('export_dollar_choropleth', frames);
                    console.log('Frames successfully added with log color scale but absolute values for display');
                });
            })
            .catch(error => console.error('Error loading frames:', error));

        // Create a BarPlot to show the same information
        fetch('https://raw.githubusercontent.com/utahwaterfacts/utah-water-facts/main/data/121490hs_sales_world_wide.json') // Replace with the path to your JSON file
            .then(response => response.json())
            .then(frames => {
                // Define the initial bar plot data (first frame)
                var bar_data = [
                    {
                        type: 'bar',
                        x: export_countries,
                        y: frames[0].data[0].z, // Initial y values from the first frame (absolute values)
                        hoverinfo: 'x+y+text', // Display country, value, and text in hover
                        marker: { color: 'blue' }
                    }
                ];

                // Define layout with the slider
                var bar_layout = {
                    xaxis: { title: 'Country' },
                    yaxis: { title: 'Export Value ($)' },
                    sliders: [{
                        active: 0,
                        steps: frames.map(frame => ({
                            method: 'animate',
                            label: frame.name,
                            args: [
                                [frame.name], // Frame name to animate to
                                {
                                    mode: 'immediate',
                                    frame: { duration: 300, redraw: true },
                                    transition: { duration: 300 }
                                }
                            ]
                        })),
                        x: 0.1,
                        len: 0.9
                    }]
                };

                // Render the initial bar plot
                Plotly.newPlot('export_dollar_bar', bar_data, bar_layout).then(function () {
                    // Convert each frame into a bar plot frame
                    frames.forEach(frame => {
                        console.log(frame);
                        frame.data[0].type = 'bar'; // Set the frame data type to 'bar'
                        frame.data[0].x = export_countries;
                        frame.data[0].y = frame.data[0].z;
                    });

                    // Add the frames for animation
                    Plotly.addFrames('export_dollar_bar', frames);

                    // Start the animation manually (optional)
                    console.log('Frames successfully added to the bar plot');
                });
            })
            .catch(error => console.error('Error loading frames:', error));

        // Plot foreign water used by year
        var foreign_water_year = [{
            x: [2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023],
            y: [0.38, 0.97, 1.91, 2.32, 2.51, 2.21, 3.76, 12.71, 4.05, 2.24, 7.21, 7.47, 10.07, 14.69, 16.1, 16.47, 18.36, 23.4, 19.99, 13.4, 8.7, 7.68],
            type: 'bar',
        }];
        Plotly.newPlot('foreign_water_usage_total', foreign_water_year, {
            yaxis: {
                title: 'Percent of Utah\'s Diverted Water'  // Label for the y-axis
            }
        });

    </script>
</body>

</html>